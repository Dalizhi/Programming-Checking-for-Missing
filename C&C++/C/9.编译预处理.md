### 一些概念
编译预处理语句一般放在源程序文件的开始部分，他们并不实现程序的功能，而是发布给编译系统，告诉编译系统在对源程序进行的第一遍扫描（此法扫描和语法分析）之前应该做什么。C语言编译系统真正编译的是预处理过的源程序版本。  
编译预处理语句的格式：
- 以 # 开头，一般位于文件行首；
- 每条预处理语句单独占一行；
- 语句不以“；”结尾。（若加了分号，连分号一起替换）

***对编译预处理和宏的理解就是替换***
### 文件包含
文件包含就是把指定的文件取代该语句并插入该语句所在位置。  
文件包含可以插入\*.c文件，也可以插入\*.h文件。通常会把公用的符号常量或宏定义、自定义数据结构、函数说明单独组成一个\*.h文件。  
1. include<stdio.h>  
默认查找系统头文件  
2. include"stdio.h"  
先在当前工作目录查找，如果找不到，再在系统目录里查找；  

### 宏定义
用一个标识符来表示一串字符，称为宏。  
在编译预处理时，预处理程序对程序中所有出现的宏名，就会直接用对应宏定义中的字符串去替换，这被称之为宏展开。

#### 不带参数的宏定义
```C
#define PI 3.1415
#define A 3+2 // 无括号，不推荐。容易出问题。
#define B (3+2) //带括号在替换的时候无论什么情况3+2都作为一个整体计算
#define S A*B //宏定义允许嵌套，宏定义的字符串可以引用已经定义的宏名
```
```C
a = 3 * A; //3 * 3 + 2 = 11,不是期望的
b = 3 * B; //3 * (3 + 2) = 15，符合期望，这就是为什么要加括号。
```

#### 带参数宏定义
```C
#define MAX(x,y) x>y?x:y //不加分号。
・・・
t = MAX(a,b); //因为这里有一个分号，替换了之后刚好合适。
・・・
```
#### 带参数宏定义注意事项：  
- 宏名和参数之间不能有空格，不然会用MAX代表字符串(x,y) x>y?x:y，这不是期望的。
- 形参最好用括号括起来，以避免出错。
```C
#define SQUARE(x) x*x
a = SQUARE(6)/SQUARE(3);
//实际替换了之后是6*6/3*3，但你要的是(6*6)/(3*3)
//所以最好定义为：
//#define SQUARE(x) (x)*(x)
```
- 宏展开是将程序中的形参字符串直接替换成实参字符串，并不检查语法，所以宏定义中的形参、实参类型没有限制。

### 条件编译
```C
#if 条件表达式1
    something1
[#else
    something2]
```
只对符合条件的部分编译，#else可以缺省。

